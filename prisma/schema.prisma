// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

generator client {
  provider = "prisma-client-js"
}

model Profile {
  userId           String   @unique
  name             String
  imageUrl         String?
  email            String?
  scoreRank        Int?
  achievementsRank Int?
  CCCount          Int?
  admin            Boolean?
  supporter        Boolean?
  joindate         DateTime
  discord          String?
  favoriteGame     Games
  bio              String?
  totalPoints      Int?
  totalScore       Int?
  eventPoints      Int?
  Replays          Replay[]
}

model Replay {
  replayId     String       @id @default(cuid())
  player       String
  character    String?
  rank         String?
  shottype     String?
  stage        String?
  slow_rate    Int?
  stage_score  Int?
  frame_count  Int?
  game         Games
  date         String?
  date_on_file String?
  z_keys       Int?
  x_keys       Int?
  c_keys       Int?
  checksum     String?
  shift        Int?
  rpy_name     String?
  points       Int?
  scorePoints  Int?
  acceptedBy   String
  filePath     String?
  comment      String?
  achievement  Achievement
  status       ReplayStatus

  Profile       Profile? @relation(fields: [profileUserId], references: [userId])
  profileUserId String?

  @@index([profileUserId])
}

enum ReplayStatus {
  NEW
  VERIFIED
  REJECTED
}

enum Achievement {
  CC
  NM
  NB
  NMNB
  NNN
  NNNN
}

enum Games {
  EOSD
  PCB
  INA
  INB
  POFV
  MOF
  SA
  UFO
  GFW
  TD
  DDC
  LOLK
  HSIFS
  WBAWC
  UM
}
